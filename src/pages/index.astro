---
import BaseLayout from '../layouts/BaseLayout.astro';
import Card from '../components/CtaCard.astro';
import InfosPratiquesCard from '../components/InfosPratiquesCard.astro';
import Greeting from '../components/Greeting.tsx';
import Newsletter from '../components/NewsletterForm.astro';
---

<BaseLayout pageTitle="Accueil | Runatika">

  <!-- GREETING -->
  <div class="greeting-container">
    <Greeting client:load messages={["Hej","Hallo","Hola","Habari"]} />
  </div>

  <!-- TITRE SECTION -->
  <h2 class="section-title">Espace bar, salle de jeux avec événements quotidiens</h2>

  <!-- CARDS -->
  <div class="cards-container">
    <Card
      title="Bar"
      description="L’aventure commence ici !"
      image="/images/barimg.jpg"
      ctaText="Voir la carte"
      ctaLink="/src/assets/Atmos Arena - Carte du bar (web).pdf"
    />
    <Card
      title="Salle de jeux"
      description="Le plaisir de jouer !"
      image="/images/barjeu.jpg"
      ctaText="Réserver une table"
      ctaLink="/src/assets/Atmos Arena - Carte du bar (web).pdf"
    />
    <Card
      title="Boutique TCG"
      description="Des centaines de références : cartes à l'unité, accessoires, produits scellés !"
      image="/images/philibert-JCC.jpg"
      ctaText="Vers la boutique"
      ctaLink="/src/assets/Atmos Arena - Carte du bar (web).pdf"
    />
  </div>

  <!-- INFOS PRATIQUES -->
  <h2 class="section-title">Où nous trouver et horaires</h2>
  <div class="infos-container">
    <InfosPratiquesCard
      mapUrl="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2533.726586119802!2d3.0963136!3d50.6313347!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x47c2d59c32e90b0f%3A0xf09d27554e0e62e0!2sFives%20Cail!5e0!3m2!1sfr!2sfr!4v1694468462335!5m2!1sfr!2sfr"
      adresse="Fives Cail, Lille"
    />
  </div>

  <!-- NEWSLETTER FLOTTANTE -->
  <Newsletter />

</BaseLayout>

<style>
/* GREETING */
.greeting-container {
  display: flex;
  justify-content: center;
  margin: 2rem 0;
}

/* SECTION TITLES */
.section-title {
  text-align: center;
  margin: 2rem 0 1rem 0;
}

/* ===== CARDS CONTAINER ===== */
.cards-container {
  display: flex;
  flex-direction: column;
  gap: 20px;
  align-items: center;
  width: 100%;
  max-width: 90%;
  margin: 0 auto;
}

/* Desktop */
@media screen and (min-width: 768px) {
  .cards-container {
    flex-direction: row;
    justify-content: center; /* centre les cartes au lieu de space-between */
    flex-wrap: wrap;
    gap: 30px; /* espace régulier */
  }

  .cards-container > * {
    flex: 1 1 300px; /* occupe au moins 300px mais peut rétrécir */
    max-width: 300px;
  }
}

/* ===== INFOS PRATIQUES ===== */
.infos-container {
  display: flex;
  flex-direction: column;
  gap: 20px;
  width: 100%;
  max-width: 90%;
  margin: 2rem auto;
}

/* Desktop */
@media screen and (min-width: 768px) {
  .infos-container {
    flex-direction: row;
    justify-content: center; /* centre horizontalement */
    gap: 30px;
  }

  .infos-container > * {
    flex: 1 1 350px;
    max-width: 350px;
  }
}

/* Mobile étroit */
@media screen and (max-width: 767px) {
  .cards-container > *, .infos-container > * {
    max-width: 280px;
  }
}

/* ===== NEWSLETTER FLOTTANTE ===== */
.newsletter {
  position: fixed;
  bottom: 20px;
  right: 40px; /* décale un peu du bord droit */
  background: rgba(30, 10, 40, 0.95);
  border: 2px solid #ffae42;
  border-radius: 12px;
  padding: 1rem;
  box-shadow: 0 0 20px rgba(255, 174, 66, 0.5);
  display: flex;
  align-items: center;
  gap: 0.5rem;
  transition: opacity 0.4s ease, transform 0.4s ease;
  z-index: 1000;
}

/* Réouverture bouton */
#showNewsletterBtn {
  position: fixed;
  bottom: 20px;
  right: 40px; /* même décalage que le bandeau */
  background: linear-gradient(270deg, #5a326e, #ffae42, #8c5b9e);
  background-size: 400% 400%;
  color: white;
  padding: 0.8rem 1.2rem;
  border-radius: 50px;
  border: 2px solid #ffae42;
  font-size: 1rem;
  cursor: pointer;
  z-index: 999;
  display: none;
  animation: gradientShift 6s ease infinite, glowPulse 2.5s infinite ease-in-out;
}
</style>